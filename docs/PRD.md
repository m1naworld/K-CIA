# K-CIA Lite: Product Requirements Document (PRD)

**버전:** 1.1
**상태:** Draft
**작성일:** 2026-01-26
**최종 수정:** 2026-01-30

---

## 1. 문서 개요

이 문서는 K-CIA Lite(성수동 하이퍼로컬 상권 분석 플랫폼)의 상세 제품 요구사항을 정의합니다.

---

## 2. 제품 비전

### 2.1 미션 스테이트먼트
> "성수동의 어제와 오늘을 3D 지도와 대화로 읽어주는 AI 컨설턴트"

### 2.2 제품 목표
1. **데이터 후행성 극복**: 공공데이터(3개월 지연)와 실시간 소셜 트렌드를 결합하여 현재 상권 상황 파악
2. **의사결정 직관성 확보**: 복잡한 데이터를 3D 시각화와 자연어 대화로 쉽게 이해
3. **복합 데이터 추론 자동화**: AI가 정량(매출/유동인구)과 정성(감성/트렌드) 데이터를 통합 분석

---

## 3. 타겟 사용자

### 3.1 Primary Persona: 예비 창업자 "김성수"
- **연령:** 30대
- **배경:** IT 회사 퇴사 후 성수동에서 카페 창업 준비
- **Pain Points:**
  - 어떤 골목이 유동인구가 많은지 모름
  - 경쟁 업체 수와 포화도 파악 어려움
  - 최신 트렌드와 소비자 반응 확인 불가
- **Goals:**
  - 최적의 입지 선정
  - 경쟁 업종 현황 파악
  - 차별화 전략 수립

### 3.2 Secondary Persona: 부동산/마케팅 전문가 "이부장"
- **연령:** 40대
- **배경:** 상업용 부동산 컨설팅 10년 경력
- **Pain Points:**
  - 팝업스토어 입지 제안 시 데이터 근거 부족
  - 클라이언트에게 설득력 있는 시각 자료 필요
  - 실시간 트렌드 모니터링 어려움
- **Goals:**
  - 데이터 기반 입지 추천
  - 시각적 리포트 생성
  - 경쟁사 대비 차별화된 인사이트 제공

---

## 4. 기능 요구사항

### 4.1 FR-1: 3D 인터랙티브 헥사곤 맵

#### 4.1.1 개요
성수동 상권을 육각형(Hexagon) 그리드로 나누어 3D 시각화

#### 4.1.2 상세 요구사항

| ID | 요구사항 | 우선순위 | 수락 기준 |
|----|---------|---------|----------|
| FR-1.1 | 헥사곤 그리드 렌더링 | P0 | 성수동 전체를 50m 반경 헥사곤으로 분할 |
| FR-1.2 | Elevation 매핑 | P0 | 유동인구/매출액을 높이(0-500px)로 표현 |
| FR-1.3 | Color 매핑 | P0 | 감성 점수(-1~1)를 RGB로 변환 (빨강→노랑→초록) |
| FR-1.4 | 클릭 인터랙션 | P0 | 헥사곤 클릭 시 사이드바에 상세 정보 표시 |
| FR-1.5 | 줌/팬 컨트롤 | P1 | 마우스/터치로 지도 조작 가능 |
| FR-1.6 | 레이어 토글 | P1 | 유동인구/매출/감성 레이어 on/off |
| FR-1.7 | 시계열 슬라이더 | P2 | 과거 데이터 시점별 비교 |

#### 4.1.3 UI 사양

```
┌─────────────────────────────────────────────────────────────────────────┐
│  K-CIA Lite                              [레이어▼] [시점▼] [필터▼]      │
├────────────┬────────────────────────────────────────┬───────────────────┤
│            │                                        │  📍 선택된 구역    │
│   필터     │                                        │  ─────────────    │
│  ────────  │                                        │  위치: 연무장길    │
│  기간:     │         [3D 헥사곤 맵 영역]             │  유동인구: 15,234명│
│  업종:     │         Deck.gl H3HexagonLayer        │  추정매출: 2.3억   │
│  연령:     │                                        │  감성점수: +0.72   │
│  시간대:   │                                        │  주요업종: 카페32% │
│            │                                        │                   │
│            │                                        │  [상세분석 요청 →] │
├────────────┴────────────────────────────────────────┴───────────────────┤
│  💬 질문을 입력하세요...                                         [전송] │
└─────────────────────────────────────────────────────────────────────────┘
```

### 4.2 FR-2: LangGraph 기반 AI 챗봇

#### 4.2.1 개요
복합적인 상권 질의에 대해 다중 에이전트가 협력하여 데이터 기반 답변 생성

#### 4.2.2 상세 요구사항

| ID | 요구사항 | 우선순위 | 수락 기준 |
|----|---------|---------|----------|
| FR-2.1 | 자연어 질의 처리 | P0 | 한국어 상권 관련 질문 이해 |
| FR-2.2 | SQL 에이전트 | P0 | 자연어→SQL 변환 정확도 90% |
| FR-2.3 | 감성분석 에이전트 | P0 | 유튜브 댓글 감성 요약 제공 |
| FR-2.4 | Supervisor 라우팅 | P0 | 질문 유형에 따른 에이전트 자동 선택 |
| FR-2.5 | 답변 종합 | P0 | 다중 에이전트 결과를 자연어로 통합 |
| FR-2.6 | 출처 표시 | P1 | 답변에 사용된 데이터 소스 명시 |
| FR-2.7 | 대화 컨텍스트 유지 | P1 | 이전 대화 맥락 기억 (세션 내) |
| FR-2.8 | 차트 생성 | P2 | 답변에 시각화 차트 포함 |

#### 4.2.3 질의 유형 분류
1. **정량 질의** (SQL Agent)
   - "연무장길 월평균 매출은?"
   - "성수동에서 카페가 가장 많은 곳은?"

2. **정성 질의** (Sentiment Agent)
   - "성수동 카페에 대한 반응은 어때?"
   - "최근 성수동 트렌드는?"

3. **복합 질의** (Multi-Agent)
   - "여기에 디저트 카페 차려도 될까?"
   - "이 골목의 강점과 약점을 분석해줘"

### 4.3 FR-3: 하이브리드 데이터 수집 엔진

#### 4.3.1 개요
공공데이터(정량)와 소셜데이터(정성)를 통합 수집하는 자동화 파이프라인

#### 4.3.2 상세 요구사항

| ID | 요구사항 | 우선순위 | 수락 기준 |
|----|---------|---------|----------|
| FR-3.1 | 서울시 API 연동 | P0 | 상권정보/유동인구 API 호출 |
| FR-3.2 | YouTube API 연동 | P0 | 성수동 관련 영상/댓글 수집 |
| FR-3.3 | 스케줄러 | P0 | 분기(공공)/일일(소셜) 배치 실행 |
| FR-3.4 | 데이터 정규화 | P0 | 이종 데이터를 통합 스키마로 변환 |
| FR-3.5 | 감성 분석 | P0 | 댓글 텍스트 → 감성 점수(-1~1) |
| FR-3.6 | 오류 처리/재시도 | P1 | API 실패 시 3회 재시도 |
| FR-3.7 | 수집 로그 | P1 | 수집 현황 모니터링 대시보드 |

---

## 5. 비기능 요구사항

### 5.1 성능 (Performance)
| 항목 | 목표 |
|-----|-----|
| 페이지 로드 | < 3초 |
| 맵 렌더링 | < 2초 |
| 챗봇 응답 | < 10초 |
| 동시 사용자 | 100명 |

### 5.2 가용성 (Availability)
- 서비스 가용률: 99% (월간 다운타임 < 7.2시간)

### 5.3 보안 (Security)
- HTTPS 필수
- API 키 환경변수 관리
- 사용자 입력 sanitization

### 5.4 데이터 신선도 (Data Freshness)
| 데이터 유형 | 갱신 주기 |
|-----------|----------|
| 공공데이터 | 분기별 |
| 유튜브 댓글 | 일일 |
| 감성 점수 | 일일 |

---

## 6. 사용자 시나리오

### 6.1 시나리오 1: 카페 창업 입지 분석

**배경:** 김성수씨가 성수동에서 디저트 카페 창업을 준비 중

**Flow:**
1. K-CIA Lite 접속
2. 3D 지도에서 높은 기둥(유동인구↑) 확인
3. 연무장길 헥사곤 클릭 → 사이드바에서 기본 지표 확인
4. 챗봇에 "여기에 디저트 카페 차려도 될까?" 입력
5. AI 분석 결과 수신:
   ```
   📊 분석 결과

   ✅ 긍정 요인:
   - 일 평균 유동인구 15,234명 (성수동 상위 20%)
   - 20-30대 비율 72%로 타겟 적합

   ⚠️ 주의 요인:
   - 카페 업종 비율 32%로 포화 상태
   - 유튜브 댓글 분석: "대기 공간 부족" 언급 23회

   💡 제안:
   대기 공간을 확보한 프리미엄 디저트 컨셉으로 차별화 권장

   📌 출처: 서울시 상권분석(2025 Q4), YouTube 댓글(최근 30일)
   ```

### 6.2 시나리오 2: 팝업스토어 입지 비교

**배경:** 이부장이 클라이언트에게 성수동 팝업 입지 3곳 제안 필요

**Flow:**
1. 지도에서 3개 구역 순차 클릭하며 비교
2. "연무장길, 성수이로, 서울숲길 중 팝업스토어 최적 입지는?" 질의
3. AI가 비교 테이블과 추천 제공

---

## 7. 릴리스 계획

### 7.1 MVP (v1.0)
- [ ] 3D 헥사곤 맵 기본 기능
- [ ] AI 챗봇 기본 질의응답
- [ ] 공공데이터 연동
- [ ] 유튜브 댓글 수집/분석

### 7.2 v1.1
- [ ] 시계열 비교 기능
- [ ] 챗봇 차트 생성
- [ ] 리포트 PDF 내보내기

### 7.3 v2.0 - 미정
- [ ] 타 지역 확장 (홍대, 이태원)
- [ ] 사용자 계정/저장 기능
- [ ] 알림 서비스

---

## 8. 성공 지표 (KPIs)

| 지표 | 목표 | 측정 방법 |
|-----|-----|----------|
| Data Latency | 소셜 트렌드 반영 < 24시간 | 수집 타임스탬프 모니터링 |
| Query Accuracy | NL→SQL 변환 성공률 ≥ 90% | 테스트 쿼리셋 평가 |
| User Engagement | 세션당 평균 질의 ≥ 3회 | 로그 분석 |
| User Satisfaction | NPS ≥ 40 | 설문 조사 |

---

## 9. 제약사항 및 가정

### 9.1 제약사항
- 서울시 API 일일 호출 제한: 10,000건
- YouTube API 일일 quota: 10,000 units
- LLM API 비용 고려 필요

### 9.2 가정
- 사용자는 한국어로 질의
- 성수동 행정동 범위 내 데이터만 처리
- 인터넷 연결 필수

---

## 10. 용어 정의

| 용어 | 정의 |
|-----|-----|
| 헥사곤 그리드 | 지도를 육각형 셀로 분할한 시각화 방식 |
| 감성 점수 | 텍스트의 긍정/부정 정도를 -1~1로 수치화 |
| LangGraph | LangChain 기반의 순환형 에이전트 프레임워크 |
| Supervisor | 다중 에이전트를 조율하는 상위 에이전트 |
| Deck.gl | Uber가 개발한 WebGL 기반 대용량 데이터 시각화 라이브러리 |

---

*Document Owner: Product Team*
*Last Updated: 2026-01-30*
